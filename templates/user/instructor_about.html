{% extends "base/base_instructor.html" %}
{% block inst_content%}



<div class="col-md-9 col-lg-10 py-5">
    <div class="container">
      <h2 class="mb-4 text-center">Edit Profile</h2>

      <!-- Single form for everything -->
      <form method="POST" action="{{ url_for('about_instructor') }}" enctype="multipart/form-data">

        <!-- Upload profile picture -->
        <div class="mb-4">
          <label class="form-label fw-bold">Profile Picture</label>
          <input type="file" class="form-control form-control-sm" accept="image/*" name="profile_picture">
        </div>

        <!-- Name -->
        <div class="mb-4">
          <label class="form-label fw-bold">Name</label>
          <div class="input-group">
            <input type="text" name="name" class="form-control" value="{{ user.name }}">
            <span class="input-group-text"><i class="bi bi-pencil"></i></span>
          </div>
        </div>

        <!-- Email -->
        <div class="mb-4">
          <label class="form-label fw-bold">Email</label>
          <div class="input-group">
            <input type="email" name="email" class="form-control" value="{{ user.email }}">
            <span class="input-group-text"><i class="bi bi-pencil"></i></span>
          </div>
        </div>

        <!-- Phone Number -->
        <div class="mb-4">
          <label class="form-label fw-bold">Phone Number</label>
          <div class="input-group">
            <input type="tel"
                   name="phone_number"
                   class="form-control"
                   value="{{ user.phonenumber[0:] if user.phonenumber else '' }}"
                   placeholder="(+995)"
                   onfocus="clearPrefix(this)"
                   pattern="\d{9}"
                   maxlength="9"
                   inputmode="numeric"
                   title="Enter 9 digit phone number after " />
            <span class="input-group-text"><i class="bi bi-pencil"></i></span>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2">
          <button type="submit" class="btn btn-success">Save Changes</button>
          <a href="{{ url_for('about_instructor') }}" class="btn btn-secondary">Cancel</a>


        </div>
 <p><strong>Created at:</strong> {{ user.created_at_tbilisi.strftime('%Y-%m-%d %H:%M') }}</p>
          <p><strong>Updated at:</strong> {{ user.updated_at_tbilisi.strftime('%Y-%m-%d %H:%M') }}</p>

      </form>
    </div>


  </div>
</div>



<!-- JavaScript -->
<script>
  function clearPrefix(input) {
    if (input.value === '+995' || input.value === '') {
      input.value = '';
    }
  }
</script>
{% endblock %}