{% extends "base/base_instructor.html" %}
{% block inst_content %}

<div class="col-md-9 col-lg-10 py-5">
  <div class="container">
    <h2 class="mb-4 text-center">Edit Profile</h2>

    <form method="POST" enctype="multipart/form-data">
      {{ form.hidden_tag() }}


      <div class="mb-4">
        {{ form.profile_picture.label(class="form-label fw-bold") }}
        {{ form.profile_picture(class="form-control form-control-sm", accept="image/*") }}
        {% if form.profile_picture.errors %}
          <div class="text-danger">{{ form.profile_picture.errors[0] }}</div>
        {% endif %}
      </div>


      <div class="mb-4">
        {{ form.name.label(class="form-label fw-bold") }}
        <div class="input-group">
          {{ form.name(class="form-control") }}
          <span class="input-group-text"><i class="bi bi-pencil"></i></span>
        </div>
        {% if form.name.errors %}
          <div class="text-danger">{{ form.name.errors[0] }}</div>
        {% endif %}
      </div>


      <div class="mb-4">
        {{ form.email.label(class="form-label fw-bold") }}
        <div class="input-group">
          {{ form.email(class="form-control") }}
          <span class="input-group-text"><i class="bi bi-pencil"></i></span>
        </div>
        {% if form.email.errors %}
          <div class="text-danger">{{ form.email.errors[0] }}</div>
        {% endif %}
      </div>


      <div class="mb-4">
        {{ form.phonenumber.label(class="form-label fw-bold") }}
        <div class="input-group">
          {{ form.phonenumber(
            class="form-control",
            placeholder="(+995)",
            onfocus="clearPrefix(this)",
            pattern="\\d{9}",
            maxlength="9",
            inputmode="numeric"
          ) }}
          <span class="input-group-text"><i class="bi bi-pencil"></i></span>
        </div>
        {% if form.phonenumber.errors %}
          <div class="text-danger">{{ form.phonenumber.errors[0] }}</div>
        {% endif %}
      </div>


      <div class="d-flex justify-content-end gap-2">
        {{ form.submit(class="btn btn-success") }}
        <a href="{{ url_for('about_instructor') }}" class="btn btn-secondary">Cancel</a>
      </div>

      <p><strong>Created at:</strong> {{ to_tbilisi(current_user.created_at).strftime('%Y-%m-%d %H:%M') }}</p>
      <p><strong>Updated at:</strong> {{ to_tbilisi(current_user.updated_at).strftime('%Y-%m-%d %H:%M') }}</p>
    </form>
  </div>
</div>

<script>
  function clearPrefix(input) {
    if (input.value === '+995' || input.value === '') {
      input.value = '';
    }
  }
</script>
{% endblock %}
